/*!CK:54861839!*//*1424144298,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["7TZug"]); }

__d("PUWErrorCodes",[],function(a,b,c,d,e,f){e.exports={BAD_JPEG:9901,WORKER_TERMINATED:9902,UNKNOWN_RESIZE_ERROR:9903,WORKER_ABORT:9904};},null);
__d("SyncRequestTitle.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:"SyncRequestTitle",propTypes:{appName:g.PropTypes.string.isRequired,isSender:g.PropTypes.bool.isRequired,receiverName:g.PropTypes.string.isRequired,senderName:g.PropTypes.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("Waiting for {receiver} to accept your invite to play {app_name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("{sender} wants to play {app_name} with you, right now.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=j;},null);
__d("SyncRequestAcceptedMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:"SyncRequestAcceptedMessage",propTypes:{appName:g.PropTypes.string.isRequired,isSender:g.PropTypes.bool.isRequired,receiverName:g.PropTypes.string.isRequired,senderName:g.PropTypes.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("{receiver} accepted your invite to play {app_name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("You accepted an invite from {sender} to play {app_name}.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=j;},null);
__d("SyncRequestRejectedMessage.react",["React","fbt","Link.react","cx","URI","AsyncRequest"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.createClass({displayName:"SyncRequestRejectedMessage",propTypes:{requestId:g.PropTypes.string.isRequired,app:g.PropTypes.object.isRequired,isSender:g.PropTypes.bool.isRequired,receiver:g.PropTypes.object.isRequired,sender:g.PropTypes.object.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("{receiver} declined your invite to play {app_name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiver.name)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.app.name))])));}else return (g.createElement("div",null,h._("You declined an invite from {sender} to play {app_name}.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.sender.name)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.app.name))]),g.createElement("div",{className:"_13n7"},g.createElement("div",null,g.createElement(i,{onClick:this._submitBlockApp},h._("Block {app}",[h.param("app",this.props.app.name)]))),g.createElement("div",null,g.createElement(i,{onClick:this._submitBlockUser},h._("Block requests from {sender}",[h.param("sender",this.props.sender.name)]))))));},_submitBlockApp:function(){var n=new k('/games/block_app/'),o=new l().setURI(n);o.setData({app_id:this.props.app.id,source:'sync_request'});o.send();},_submitBlockUser:function(){var n=new k('/games/block_user/'),o=new l().setURI(n);o.setData({app_id:this.props.app.id,blockee_uid:this.props.sender.id});o.send();}});e.exports=m;},null);
__d("SyncRequestExpiredMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:"SyncRequestExpiredMessage",propTypes:{appName:g.PropTypes.string.isRequired,isSender:g.PropTypes.bool.isRequired,receiverName:g.PropTypes.string.isRequired,senderName:g.PropTypes.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("{receiver} missed your invite to play {app_name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("You missed an invite from {sender} to play {app_name}.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=j;},null);
__d("SyncRequestCanceledMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:"SyncRequestCanceledMessage",propTypes:{appName:g.PropTypes.string.isRequired,isSender:g.PropTypes.bool.isRequired,receiverName:g.PropTypes.string.isRequired,senderName:g.PropTypes.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("You canceled an invite to {receiver} to play {app_name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("{sender} canceled an invitation to play {app_name}.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=j;},null);
__d("SyncRequestTimer.react",["React","fbt"],function(a,b,c,d,e,f,g,h){function i(k){if(k){k=Math.ceil(k);var l=k%60;if(l<10)l='0'+l;var m=Math.floor(k/60);return m+':'+l;}else return "0:00";}var j=g.createClass({displayName:"SyncRequestTimer",propTypes:{timeRemaining:g.PropTypes.number.isRequired,isSender:g.PropTypes.bool.isRequired,receiverName:g.PropTypes.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("({time_remaining} remaining)",[h.param("time_remaining",i(this.props.timeRemaining))])));}else return (g.createElement("div",null,h._("You have {time_remaining} to accept.",[h.param("time_remaining",i(this.props.timeRemaining))])));}});e.exports=j;},null);
__d("XSyncRequestSubmitController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/platform\/games\/sync_requests\/submit\/",{request_id:{type:"Int",required:true},sender:{type:"Int",required:true},action:{type:"Int",required:true}});},null);
__d("SyncRequest.react",["Arbiter","AsyncRequest","ChannelConstants","React","SyncRequestStatusEnum","SyncRequestTitle.react","SyncRequestAcceptedMessage.react","SyncRequestRejectedMessage.react","SyncRequestExpiredMessage.react","SyncRequestCanceledMessage.react","SyncRequestTimer.react","XUIButton.react","XSyncRequestSubmitController","cx","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=j.createClass({displayName:"SyncRequest",propTypes:{app:j.PropTypes.object.isRequired,creationTime:j.PropTypes.number.isRequired,requestId:j.PropTypes.string.isRequired,receiver:j.PropTypes.object.isRequired,sender:j.PropTypes.object.isRequired,status:j.PropTypes.oneOf(v(k)).isRequired,timeout:j.PropTypes.number.isRequired,timeRemaining:j.PropTypes.number.isRequired,viewerId:j.PropTypes.number.isRequired,onStatusUpdate:j.PropTypes.func},componentWillMount:function(){if(this.props.status===k.PENDING){var x=g.subscribe(i.getArbiterType('sync_request_updated'),function(aa,ba){ba=ba.obj;if(ba.id.toString()!==this.props.requestId)return;this.setState({status:ba.status});}.bind(this));this.setState({statusEvent:x});}var y=null;if(this.props.status===k.PENDING){var z=function(){this.setState({time_remaining:(this.state.time_remaining-1)});if(this.state.time_remaining<=0){clearInterval(this.state.counter);var aa={counter:null,time_remaining:0};if(this.state.status===k.PENDING)aa.status=k.EXPIRED;this.setState(aa);}};y=setInterval(z.bind(this),1000);}this.setState({time_remaining:this.props.timeRemaining,counter:y});},componentWillUnmount:function(){if(this.state.counter)clearInterval(this.state.counter);g.unsubscribe(this.state.statusEvent);},getInitialState:function(){return {buttonsDisabled:false,time:Date.now(),status:this.props.status,viewerIsSender:this.props.viewerId===this.props.sender.id};},componentDidUpdate:function(x,y){if(this.props.status!=k.PENDING)this.state.status=this.props.status;if(this.props.onStatusUpdate)this.props.onStatusUpdate(this.state.status,y.status);},render:function(){var x;switch(this.state.status){case k.PENDING:var y;if(!this.state.viewerIsSender){y=[j.createElement(r,{use:"confirm",onClick:this._handleAccept,disabled:this.state.buttonsDisabled,label:"Accept"}),j.createElement(r,{use:"default",onClick:this._handleReject,disabled:this.state.buttonsDisabled,label:"Decline"})];}else y=j.createElement(r,{use:"default",onClick:this._handleCancel,disabled:this.state.buttonsDisabled,label:"Cancel"});x=(j.createElement("div",null,j.createElement("div",{className:"_372m"},j.createElement(l,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name})),j.createElement("div",{className:"_372n"},j.createElement(q,{isSender:this.state.viewerIsSender,timeRemaining:this.state.time_remaining,receiverName:this.props.receiver.name})),j.createElement("div",{className:"_372o"},y)));break;case k.ACCEPTED:x=j.createElement("div",{className:"_372p mvs"},j.createElement(m,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case k.REJECTED:x=j.createElement("div",{className:"_372p mvs"},j.createElement(n,{requestId:this.props.requestId,app:this.props.app,isSender:this.state.viewerIsSender,receiver:this.props.receiver,sender:this.props.sender}));break;case k.EXPIRED:x=j.createElement("div",{className:"_372p mvs"},j.createElement(o,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case k.CANCELED:x=j.createElement("div",{className:"_372p mvs"},j.createElement(p,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;default:throw new Error('The request status `%s` is unknown.',this.state.status);}return (j.createElement("div",{className:"_372q"},x));},_handleAccept:function(){this._handleStatusUpdate(k.ACCEPTED);var x=window.open(this.props.app.uri);if(x)x.focus();},_handleReject:function(){this._handleStatusUpdate(k.REJECTED);},_handleCancel:function(){this._handleStatusUpdate(k.CANCELED);},_handleStatusUpdate:function(x){this.setState({status:x,buttonsDisabled:true});var y=s.getURIBuilder().setInt('request_id',this.props.requestId).setInt('sender',this.props.sender.id).setInt('action',x).getURI();new h().setURI(y).setHandler(function(z){this.setState({status:x});}.bind(this)).setErrorHandler(function(z){this.setState({buttonsDisabled:false});}.bind(this)).send();}});e.exports=w;},null);
__d("FBOverlayBase.react",["React"],function(a,b,c,d,e,f,g){var h=g.createClass({displayName:"FBOverlayBase",render:function(){return g.Children.only(this.props.children);}});e.exports=h;},null);
__d("FBOverlayElement.react",["React","cloneWithProps","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){var k=g.PropTypes,l={horizontal:{left:"_32rg",right:"_32rh",fit:j("_32rg","_32rh")},vertical:{top:"_32ri",bottom:"_32rj",fit:j("_32ri","_32rj")}},m=g.createClass({displayName:"FBOverlayElement",propTypes:{horizontal:k.oneOf(['left','right','fit']),vertical:k.oneOf(['top','bottom','fit'])},getDefaultProps:function(){return {horizontal:'fit',vertical:'fit'};},render:function(){var n=j("_32rk",l.horizontal[this.props.horizontal],l.vertical[this.props.vertical]);return h(g.Children.only(this.props.children),{className:n});}});e.exports=m;},null);
__d("FBOverlayContainer.react",["FBOverlayBase.react","FBOverlayElement.react","React","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=i.createClass({displayName:"FBOverlayContainer",propTypes:{children:function(n,o){var p=n[o],q=0;i.Children.forEach(p,function(r){if(r===null||r===(void 0))return;switch(r.type){case g.type:q++;break;case h.type:break;default:k(false);}});k(q===1);}},render:function(){return (i.createElement("div",i.__spread({},this.props,{className:l(this.props.className,"_23n-")}),this.props.children));}});e.exports=m;},null);
__d("AbstractDialog.react",["DialogX","LayerHideOnBlur","ReactPropTypes","copyProperties","merge"],function(a,b,c,d,e,f,g,h,i,j,k){var l={createSpec:function(m){return {displayName:m.displayName,propTypes:{behaviors:i.object,className:i.string,modal:i.bool,autohide:i.number,width:i.number,titleID:i.string,causalElement:i.object,causalElementRef:i.string,shown:i.bool,layerHideOnBlur:i.bool,fixedTopPosition:i.number},createLayer:function(n){var o=this.props.className,p=j({width:this.props.width,xui:true,autohide:this.props.autohide,classNames:o?o.split(' '):null,titleID:this.props.titleID,causalElement:this._getCausalElement(),fixedTopPosition:this.props.fixedTopPosition},m||{}),q=k(m.addedBehaviors,this.props.behaviors);if(this.props.layerHideOnBlur!==false)q.LayerHideOnBlur=h;p.addedBehaviors=this.enumerateBehaviors(q);var r=new g(p,n);r.conditionShow(this.props.shown);return r;},receiveProps:function(n){this.updateBehaviors(n.behaviors);if(this.layer){this.layer.setCausalElement(this._getCausalElement());this.layer.conditionShow(n.shown);this.layer.setWidth(n.width);n.shown&&this.layer.updatePosition();}},_getCausalElement:function(){var n;if(this.props.causalElementRef){n=this.getNodeForOwnerRef(this.props.causalElementRef);}else n=this.props.causalElement;return n;}};}};e.exports=l;},null);
__d("XUIDialog.react",["AbstractDialog.react","LayerFadeOnShow","ReactLayer"],function(a,b,c,d,e,f,g,h,i){var j=i.createClass(g.createSpec({displayName:'XUIDialog',addedBehaviors:{LayerFadeOnShow:h}}));e.exports=j;},null);
__d("XUITextInput.react",["AbstractTextInput.react","React","XUIError.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.createClass({displayName:"XUITextInput",propTypes:Object.assign({},g.propTypes,i.propTypes),render:function(){var m=(("_55r1")+(this.props.height=='tall'?' '+"_55r2":'')),n=(h.createElement(g,h.__spread({},this.props,{ref:"textInput",className:k(this.props.className,m)})));return (h.createElement(i,h.__spread({},this.props),n));},focusInput:function(){this.refs.textInput.focusInput();}});e.exports=l;},null);
__d("str2rstr",[],function(a,b,c,d,e,f){function g(h){var i="",j,k;for(var l=0;l<h.length;l++){j=h.charCodeAt(l);k=l+1<h.length?h.charCodeAt(l+1):0;if(55296<=j&&j<=56319&&56320<=k&&k<=57343){j=65536+((j&1023)<<10)+(k&1023);l++;}if(j<=127){i+=String.fromCharCode(j);}else if(j<=2047){i+=String.fromCharCode(192|((j>>>6)&31),128|(j&63));}else if(j<=65535){i+=String.fromCharCode(224|((j>>>12)&15),128|((j>>>6)&63),128|(j&63));}else if(j<=2097151)i+=String.fromCharCode(240|((j>>>18)&7),128|((j>>>12)&63),128|((j>>>6)&63),128|(j&63));}return i;}e.exports=g;},null);
__d("md5",["str2rstr"],function(a,b,c,d,e,f,g){function h(u,v){var w=u[0],x=u[1],y=u[2],z=u[3];w=j(w,x,y,z,v[0],7,-680876936);z=j(z,w,x,y,v[1],12,-389564586);y=j(y,z,w,x,v[2],17,606105819);x=j(x,y,z,w,v[3],22,-1044525330);w=j(w,x,y,z,v[4],7,-176418897);z=j(z,w,x,y,v[5],12,1200080426);y=j(y,z,w,x,v[6],17,-1473231341);x=j(x,y,z,w,v[7],22,-45705983);w=j(w,x,y,z,v[8],7,1770035416);z=j(z,w,x,y,v[9],12,-1958414417);y=j(y,z,w,x,v[10],17,-42063);x=j(x,y,z,w,v[11],22,-1990404162);w=j(w,x,y,z,v[12],7,1804603682);z=j(z,w,x,y,v[13],12,-40341101);y=j(y,z,w,x,v[14],17,-1502002290);x=j(x,y,z,w,v[15],22,1236535329);w=k(w,x,y,z,v[1],5,-165796510);z=k(z,w,x,y,v[6],9,-1069501632);y=k(y,z,w,x,v[11],14,643717713);x=k(x,y,z,w,v[0],20,-373897302);w=k(w,x,y,z,v[5],5,-701558691);z=k(z,w,x,y,v[10],9,38016083);y=k(y,z,w,x,v[15],14,-660478335);x=k(x,y,z,w,v[4],20,-405537848);w=k(w,x,y,z,v[9],5,568446438);z=k(z,w,x,y,v[14],9,-1019803690);y=k(y,z,w,x,v[3],14,-187363961);x=k(x,y,z,w,v[8],20,1163531501);w=k(w,x,y,z,v[13],5,-1444681467);z=k(z,w,x,y,v[2],9,-51403784);y=k(y,z,w,x,v[7],14,1735328473);x=k(x,y,z,w,v[12],20,-1926607734);w=l(w,x,y,z,v[5],4,-378558);z=l(z,w,x,y,v[8],11,-2022574463);y=l(y,z,w,x,v[11],16,1839030562);x=l(x,y,z,w,v[14],23,-35309556);w=l(w,x,y,z,v[1],4,-1530992060);z=l(z,w,x,y,v[4],11,1272893353);y=l(y,z,w,x,v[7],16,-155497632);x=l(x,y,z,w,v[10],23,-1094730640);w=l(w,x,y,z,v[13],4,681279174);z=l(z,w,x,y,v[0],11,-358537222);y=l(y,z,w,x,v[3],16,-722521979);x=l(x,y,z,w,v[6],23,76029189);w=l(w,x,y,z,v[9],4,-640364487);z=l(z,w,x,y,v[12],11,-421815835);y=l(y,z,w,x,v[15],16,530742520);x=l(x,y,z,w,v[2],23,-995338651);w=m(w,x,y,z,v[0],6,-198630844);z=m(z,w,x,y,v[7],10,1126891415);y=m(y,z,w,x,v[14],15,-1416354905);x=m(x,y,z,w,v[5],21,-57434055);w=m(w,x,y,z,v[12],6,1700485571);z=m(z,w,x,y,v[3],10,-1894986606);y=m(y,z,w,x,v[10],15,-1051523);x=m(x,y,z,w,v[1],21,-2054922799);w=m(w,x,y,z,v[8],6,1873313359);z=m(z,w,x,y,v[15],10,-30611744);y=m(y,z,w,x,v[6],15,-1560198380);x=m(x,y,z,w,v[13],21,1309151649);w=m(w,x,y,z,v[4],6,-145523070);z=m(z,w,x,y,v[11],10,-1120210379);y=m(y,z,w,x,v[2],15,718787259);x=m(x,y,z,w,v[9],21,-343485551);u[0]=s(w,u[0]);u[1]=s(x,u[1]);u[2]=s(y,u[2]);u[3]=s(z,u[3]);}function i(u,v,w,x,y,z){v=s(s(v,u),s(x,z));return s((v<<y)|(v>>>(32-y)),w);}function j(u,v,w,x,y,z,aa){return i((v&w)|((~v)&x),u,v,y,z,aa);}function k(u,v,w,x,y,z,aa){return i((v&x)|(w&(~x)),u,v,y,z,aa);}function l(u,v,w,x,y,z,aa){return i(v^w^x,u,v,y,z,aa);}function m(u,v,w,x,y,z,aa){return i(w^(v|(~x)),u,v,y,z,aa);}function n(u){var v=u.length,w=[1732584193,-271733879,-1732584194,271733878],x;for(x=64;x<=u.length;x+=64)h(w,o(u.substring(x-64,x)));u=u.substring(x-64);var y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(x=0;x<u.length;x++)y[x>>2]|=u.charCodeAt(x)<<((x&3)<<3);y[x>>2]|=128<<((x&3)<<3);if(x>55){h(w,y);for(x=0;x<16;x++)y[x]=0;}y[14]=v*8;h(w,y);return w;}function o(u){var v=[],w=0;while(w<64)v[w>>2]=u.charCodeAt(w++)|(u.charCodeAt(w++)<<8)|(u.charCodeAt(w++)<<16)|(u.charCodeAt(w++)<<24);return v;}var p='0123456789abcdef'.split('');function q(u){var v='',w=0;for(;w<4;w++)v+=p[(u>>((w<<3)+4))&15]+p[(u>>(w<<3))&15];return v;}function r(u){for(var v=0;v<u.length;v++)u[v]=q(u[v]);return u.join('');}var s=function(u,v){return (u+v)&4294967295;};function t(u){if(null===u||(void 0)===u){return null;}else{for(var v=0;v<u.length;v++)if(u[v]>"\u007F"){u=g(u);break;}return r(n(u));}}if(t('hello')!='5d41402abc4b2a76b9719d911017c592')s=function(u,v){var w=(u&65535)+(v&65535),x=(u>>16)+(v>>16)+(w>>16);return (x<<16)|(w&65535);};e.exports=t;},null);
__d("destroyOnUnload",["Run"],function(a,b,c,d,e,f,g){function h(i){g.onLeave(i);}e.exports=h;},null);
__d("Emscripten",[],function(a,b,c,d,e,f){e.exports={isSupported:function(){return (typeof Int32Array!=='undefined'&&typeof Float64Array!=='undefined'&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set);}};},null);
__d("XHRHttpError",[],function(a,b,c,d,e,f){var g='HTTP_CLIENT_ERROR',h='HTTP_PROXY_ERROR',i='HTTP_SERVER_ERROR',j='HTTP_TRANSPORT_ERROR',k='HTTP_UNKNOWN_ERROR';function l(m,n){if(n===0){var o=m.getProtocol();if(o==='file'||o==='ftp')return null;return j;}else if(n>=100&&n<200){return h;}else if(n>=200&&n<300){return null;}else if(n>=400&&n<500){return g;}else if(n>=500&&n<600){return i;}else if(n>=12001&&n<12156){return j;}else return k;}e.exports={getErrorCode:l,HTTP_CLIENT_ERROR:g,HTTP_PROXY_ERROR:h,HTTP_SERVER_ERROR:i,HTTP_TRANSPORT_ERROR:j,HTTP_UNKNOWN_ERROR:k};},null);
__d("xhrSimpleDataSerializer",[],function(a,b,c,d,e,f){function g(h){var i=[],j;for(j in h)i.push(encodeURIComponent(j)+'='+encodeURIComponent(h[j]));return i.join('&');}e.exports=g;},null);
__d("XHRRequest",["ErrorUtils","TimeSlice","URI","XHRHttpError","getSameOriginTransport","invariant","xhrSimpleDataSerializer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={errorCode:null,errorMsg:null,errorType:null},o={loadedBytes:null,totalBytes:null};function p(q){"use strict";this.setURI(q);this.setMethod('POST');this.setTransportBuilder(k);this.setDataSerializer(m);this.$XHRRequest0=this.$XHRRequest0.bind(this);}p.prototype.setURI=function(q){"use strict";this.$XHRRequest1=new i(q);return this;};p.prototype.getURI=function(){"use strict";return this.$XHRRequest1;};p.prototype.setMethod=function(q){"use strict";this.$XHRRequest2=q;return this;};p.prototype.getMethod=function(){"use strict";return this.$XHRRequest2;};p.prototype.setData=function(q){"use strict";this.$XHRRequest3=q;return this;};p.prototype.getData=function(){"use strict";return this.$XHRRequest3;};p.prototype.setRawData=function(q){"use strict";this.$XHRRequest4=q;return this;};p.prototype.setRequestHeader=function(q,r){"use strict";if(!this.$XHRRequest5)this.$XHRRequest5={};this.$XHRRequest5[q]=r;return this;};p.prototype.setTimeout=function(q){"use strict";this.$XHRRequest6=q;return this;};p.prototype.setResponseHandler=function(q){"use strict";this.$XHRRequest7=q;return this;};p.prototype.setErrorHandler=function(q){"use strict";this.$XHRRequest8=q;return this;};p.prototype.setAbortHandler=function(q){"use strict";this.$XHRRequest9=q;return this;};p.prototype.setTimeoutHandler=function(q){"use strict";this.$XHRRequesta=q;return this;};p.prototype.setUploadProgressHandler=function(q){"use strict";this.$XHRRequestb=q;return this;};p.prototype.setTransportBuilder=function(q){"use strict";this.$XHRRequestc=q;return this;};p.prototype.setDataSerializer=function(q){"use strict";this.$XHRRequestd=q;return this;};p.prototype.send=function(){"use strict";var q=this.$XHRRequest6,r=this.$XHRRequestc(),s=this.getURI();this.$XHRRequeste=r;var t;l(this.$XHRRequest2==='POST'||!this.$XHRRequest4);if(this.$XHRRequest2==='GET'||this.$XHRRequest4){s.addQueryData(this.$XHRRequest3);t=this.$XHRRequest4;}else t=this.$XHRRequestd(this.$XHRRequest3);r.onreadystatechange=h.guard(this.$XHRRequest0,'XHRRequest onreadystatechange');if(r.upload&&this.$XHRRequestb)r.upload.onprogress=this.$XHRRequestf.bind(this);if(q)this.$XHRRequestg=setTimeout(this.$XHRRequesth.bind(this),q);r.open(this.$XHRRequest2,s.toString(),true);if(this.$XHRRequest5)for(var u in this.$XHRRequest5)r.setRequestHeader(u,this.$XHRRequest5[u]);r.send(t);};p.prototype.abort=function(){"use strict";this.$XHRRequesti();if(this.$XHRRequest9)g.applyWithGuard(this.$XHRRequest9,null,null,null,'XHRRequest:_abortHandler');};p.prototype.$XHRRequesti=function(){"use strict";var q=this.$XHRRequeste;if(q){q.onreadystatechange=null;q.abort();}this.$XHRRequestj();};p.prototype.$XHRRequesth=function(){"use strict";this.$XHRRequesti();if(this.$XHRRequesta)g.applyWithGuard(this.$XHRRequesta,null,null,null,'XHRRequest:_abortHandler');};p.prototype.$XHRRequest0=function(){"use strict";var q=this.$XHRRequeste,r=q,s=r.readyState;if(s>=2){var t=s===4,u=this.getURI(),v=j.getErrorCode(u,q.status),w=this.$XHRRequest7;if(v!==null){if(t){n.errorCode=v;n.errorMsg=q.responseText;n.errorType='HTTP';if(this.$XHRRequest8)g.applyWithGuard(this.$XHRRequest8,null,[n],null,'XHRRequest:_errorHandler');}}else if(w){var x=null;if(w.includeHeaders)x=q.getAllResponseHeaders();if(t||(w.parseStreaming&&s===3))g.applyWithGuard(w,null,[q.responseText,x,t],null,'XHRRequest:handler');}if(t)this.$XHRRequestj();}};p.prototype.$XHRRequestf=function(q){"use strict";o.loadedBytes=q.loaded;o.totalBytes=q.total;if(this.$XHRRequestb)g.applyWithGuard(this.$XHRRequestb,null,[o],null,'XHRRequest:_uploadProgressHandler');};p.prototype.$XHRRequestj=function(){"use strict";clearTimeout(this.$XHRRequestg);delete this.$XHRRequeste;};e.exports=p;},null);
__d("getCrossOriginTransport",["ex","invariant"],function(a,b,c,d,e,f,g,h){function i(){try{var k=new XMLHttpRequest();if(!('withCredentials' in k)&&typeof XDomainRequest!=='undefined')k=new XDomainRequest();return k;}catch(j){throw new Error(g('getCrossOriginTransport: %s',j.message));}}i.withCredentials=function(){var j=i();h('withCredentials' in j);var k=j.open;j.open=function(){k.apply(this,arguments);this.withCredentials=true;};return j;};e.exports=i;},null);
__d("WebWorker",["BanzaiLogger","WebWorkerConfig","BlobFactory","EventListener","URI","areSameOrigin","destroyOnUnload","SubscriptionsHandler","XHRRequest","arrayContains","emptyFunction","getCrossOriginTransport","performanceNow","invariant","memoize","merge","filterObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=a.URL||a.webkitURL;function y(ea){"use strict";this.$WebWorker0=false;this.$WebWorker1=null;this.$WebWorker2=ea;this.$WebWorker3=null;this.$WebWorker4=q;this.$WebWorker5=q;this.$WebWorker6=[];this.$WebWorker7=false;this.$WebWorker8=new n();m(function(){if(!this.$WebWorker7)this.terminate();}.bind(this));this.$WebWorker9('constructed');}y.prototype.setMessageHandler=function(ea){"use strict";this.$WebWorker4=ea||q;return this;};y.prototype.setErrorHandler=function(ea){"use strict";this.$WebWorker5=ea||q;return this;};y.prototype.postMessage=function(ea,fa){"use strict";t(!this.isCurrentState('constructed'));t(!this.isCurrentState('terminated'));if(this.isCurrentState('preparing')){this.$WebWorker6.push(this.postMessage.bind(this,ea,fa));return this;}var ga={type:'message',message:ea};if(fa){this.$WebWorker3.postMessage(ga,fa);}else this.$WebWorker3.postMessage(ga);return this;};y.prototype.terminate=function(){"use strict";if(this.isCurrentState('executing'))this.$WebWorker3.terminate();if(!this.isCurrentState('terminated')){this.$WebWorker9('terminated');this.$WebWorker3=null;this.$WebWorkera();this.$WebWorker6=[];}return this;};y.prototype.execute=function(){"use strict";t(!this.isCurrentState('terminated'));if(['preparing','executing'].some(this.isCurrentState,this))return this;this.$WebWorker9('preparing');y.prepareResource(this.$WebWorker2,this.$WebWorkerb.bind(this));return this;};y.prototype.setAllowCrossPageTransition=function(ea){"use strict";this.$WebWorker7=ea;return this;};y.prototype.isCurrentState=function(ea){"use strict";t(p(y.states,ea));return ea===this.$WebWorker1;};y.prototype.$WebWorkerb=function(){"use strict";t(!this.isCurrentState('executing'));if(this.isCurrentState('terminated'))return;t(this.$WebWorker2.sameOriginURL||this.$WebWorker2.source);if(this.$WebWorker2.sameOriginURL){this.$WebWorker3=new a.Worker(this.$WebWorker2.sameOriginURL);}else{this.$WebWorker3=new a.Worker(y.evalWorkerURL);this.$WebWorker3.postMessage(this.$WebWorker2.source);}this.$WebWorkerc('ping',Date.now());this.$WebWorkerd();this.$WebWorker9('executing');this.$WebWorker6.forEach(function(ea){return ea();});this.$WebWorker6=null;};y.prototype.$WebWorkera=function(){"use strict";this.$WebWorker8.release();};y.prototype.$WebWorkerc=function(ea){"use strict";for(var fa=[],ga=1,ha=arguments.length;ga<ha;ga++)fa.push(arguments[ga]);this.$WebWorker3.postMessage({type:ea,args:fa});};y.prototype.$WebWorkere=function(event,ea){"use strict";y.$WebWorkere(event,this.$WebWorker2.name,v(ea,{cross_page_transition:!!this.$WebWorker7,state:this.$WebWorker1}));};y.$WebWorkerf=function(){"use strict";return Object.keys(w({object_url:y.$WebWorkerg(),eval_url:ca(),data_url:y.$WebWorkerh(),worker:y.isSupported(),transferables:y.areTransferablesSupported()},function(ea){return !!ea;}));};y.prototype.$WebWorkerd=function(){"use strict";this.$WebWorker8.addSubscriptions(j.listen(this.$WebWorker3,'message',this.$WebWorkeri.bind(this)),j.listen(this.$WebWorker3,'error',this.$WebWorkerj.bind(this)));};y.prototype.$WebWorkerj=function(ea){"use strict";var fa=this.$WebWorker5(ea);if(!fa&&!ea.defaultPrevented)this.$WebWorkere('exception',{message:ea.message});};y.prototype.$WebWorkeri=function(event){"use strict";var ea=event.data;switch(ea.type){case 'message':this.$WebWorker4(ea.message);break;case 'pong':this.$WebWorker0=true;this.$WebWorkere('executed',{dt:Math.floor(ea.args[1]-ea.args[0]),bytes:this.$WebWorker2.source.length});break;case 'terminate':this.terminate();break;case 'haste-error':this.terminate();this.$WebWorkere('haste_error',{message:ea.message});break;case 'console':var fa=ea.args.shift();t(p(['log','error','info','debug','warn'],fa));a.console[fa].apply(a.console,ea.args);break;}};y.prototype.$WebWorker9=function(ea){"use strict";t(p(y.states,ea));this.$WebWorkere('transition',{next_state:ea});this.$WebWorker1=ea;};y.prepareResource=function(ea,fa){"use strict";fa=fa||q;t(ea.sameOriginURL||ea.url||ea.source);t(!!y.isSupported());if(ea.sameOriginURL){fa();}else if(ea.url&&l(new k(ea.url),new k(a.location.href))){ea.sameOriginURL=ea.url;fa();}else if(ea.source){if(y.$WebWorkerk())ea.sameOriginURL=y.$WebWorkerl(ea.source);fa();}else if(!ea.loading){var ga=s();ea.loading=[fa];y.$WebWorkerm(ea.url,function(ha){if(ha){ea.source=ha;if(y.$WebWorkerk())ea.sameOriginURL=y.$WebWorkerl(ha);}y.$WebWorkere('prepared',ea.name,{dt:Math.floor(s()-ga),bytes:ha.length});ea.loading.forEach(function(ia){return ia();});ea.loading=false;});}else ea.loading.push(fa);return ea;};y.releaseResource=function(ea){"use strict";if(ea.sameOriginURL.indexOf('blob:')===0){if(x.revokeObjectURL)x.revokeObjectURL(ea.sameOriginURL);ea.sameOriginURL=null;}return ea;};y.isSupported=function(){"use strict";return ba&&(y.$WebWorkerk()||ca());};y.areTransferablesSupported=function(){"use strict";return y.isSupported()&&da();};y.$WebWorkerm=function(ea,fa){"use strict";new o(ea).setTransportBuilder(r).setMethod('GET').setResponseHandler(function(ga){fa(ga);}).setErrorHandler(fa.bind(null,null)).send();};y.$WebWorkerl=function(ea){"use strict";t(y.$WebWorkerk());if(y.$WebWorkerg()){var fa=i.getBlob([ea],{type:'application/javascript'});return x.createObjectURL(fa);}if(y.$WebWorkerh())return 'data:application/javascript,'+encodeURIComponent(ea);};y.$WebWorkerg=function(){"use strict";return i.isSupported()&&z();};y.$WebWorkerh=function(){"use strict";return aa();};y.$WebWorkerk=function(){"use strict";return y.$WebWorkerg()||y.$WebWorkerh();};y.$WebWorkere=function(event,ea,fa){"use strict";if(!h.logging.enabled)return;g.log(h.logging.config,v(fa,{features_array:y.$WebWorkerf(),event:event,resource:ea}));};var z=u(function(){var ea,fa;if(!x||!x.createObjectURL)return false;try{ea=x.createObjectURL(i.getBlob([''],{type:'application/javascript'}));var ha=new a.Worker(ea);ha.terminate();fa=true;}catch(ga){fa=false;}finally{if(x.revokeObjectURL)x.revokeObjectURL(ea);}return fa;}),aa=u(function(){var ea;try{var ga=new a.Worker('data:application/javascript,');ga.terminate();ea=true;}catch(fa){ea=false;}return ea;}),ba=!!a.Worker,ca=u(function(){var ea;try{var ga=new a.Worker(y.evalWorkerURL);ga.terminate();ea=true;}catch(fa){ea=false;}return ea;}),da=u(function(){var ea;try{var ga=new a.Worker(y.evalWorkerURL),ha=new ArrayBuffer(0);ga.postMessage({buffer:ha},[ha]);ga.terminate();ea=true;}catch(fa){ea=false;}return ea;});y.states=['constructed','preparing','executing','terminated'];y.evalWorkerURL=h.evalWorkerURL;e.exports=y;},null);
__d("PooledWebWorker",["WebWorker"],function(a,b,c,d,e,f,g){for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k,l,m){"use strict";i.constructor.call(this,m);this.$PooledWebWorker0=l;this.$PooledWebWorker1=k;}j.prototype.getIndex=function(){"use strict";return this.$PooledWebWorker0;};j.prototype.getPool=function(){"use strict";return this.$PooledWebWorker1;};e.exports=j;},null);
__d("WebWorkerPool",["PooledWebWorker","emptyFunction"],function(a,b,c,d,e,f,g,h){i.isSupported=function(){"use strict";return g.isSupported();};function i(j,k){"use strict";this.$WebWorkerPool0=[];for(var l=0;l<k;l++)this.$WebWorkerPool0.push(new g(this,l,j).setErrorHandler(this.$WebWorkerPool1).setMessageHandler(this.$WebWorkerPool2).execute());this.$WebWorkerPool3=0;}i.prototype.setMessageHandler=function(j){"use strict";this.$WebWorkerPool4=j||h;return this;};i.prototype.setAllowCrossPageTransition=function(j){"use strict";this.$WebWorkerPool0.forEach(function(k){return k.setAllowCrossPageTransition(j);});return this;};i.prototype.setErrorHandler=function(j){"use strict";this.$WebWorkerPool5=j||h;return this;};i.prototype.postMessage=function(){"use strict";for(var j=[],k=0,l=arguments.length;k<l;k++)j.push(arguments[k]);var m=this.getWorker();m.postMessage.apply(m,j);return m;};i.prototype.$WebWorkerPool2=function(){"use strict";for(var j=[],k=0,l=arguments.length;k<l;k++)j.push(arguments[k]);j.unshift(this);this.getPool().$WebWorkerPool4.apply(this.getPool(),j);};i.prototype.$WebWorkerPool1=function(){"use strict";for(var j=[],k=0,l=arguments.length;k<l;k++)j.push(arguments[k]);j.unshift(this);return this.getPool().$WebWorkerPool5.apply(this.getPool(),j);};i.prototype.getWorker=function(){"use strict";var j=this.$WebWorkerPool0[this.$WebWorkerPool3];this.$WebWorkerPool3=(this.$WebWorkerPool3+1)%this.$WebWorkerPool0.length;return j;};e.exports=i;},null);
__d("JpegResizer",["Emscripten","JpegResizerConfig","JpegResizeWorkerResource","WebWorker","WebWorkerPool","PUWErrorCodes"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=null;n.isSupported=function(){"use strict";return k.isSupported()&&g.isSupported()&&!h.isGKBlacklisted;};n.getSingleton=function(){"use strict";if(!m)m=new n(n.DEFAULT_POOL_SIZE).setAllowCrossPageTransition(true);return m;};n.prepareResource=function(o){"use strict";j.prepareResource(i,o);};function n(o){"use strict";o=o||n.DEFAULT_POOL_SIZE;j.prepareResource(i);this.$JpegResizer0=(new k(i,o)).setErrorHandler(this.$JpegResizer1.bind(this)).setMessageHandler(this.$JpegResizer2.bind(this));this.$JpegResizer3={};this.$JpegResizer4=n.DEFAULT_RESIZE_HEIGHT;this.$JpegResizer5=n.DEFAULT_RESIZE_WIDTH;}n.prototype.setHighQuality=function(o){"use strict";if(o){this.$JpegResizer4=n.DEFAULT_RESIZE_HEIGHT;this.$JpegResizer5=n.DEFAULT_RESIZE_WIDTH;}else{this.$JpegResizer4=n.LOW_QUALITY_RESIZE_HEIGHT;this.$JpegResizer5=n.LOW_QUALITY_RESIZE_WIDTH;}return this;};n.prototype.setAllowCrossPageTransition=function(o){"use strict";this.$JpegResizer0.setAllowCrossPageTransition(o);return this;};n.prototype.resizeBlob=function(o,p,q){"use strict";var r=this.$JpegResizer0.getWorker();if(r.isCurrentState('terminated')){var s=new Error('Worker terminated');s.code=l.WORKER_TERMINATED;p(s);return this;}var t=r.postMessage({blob:o,height:this.$JpegResizer4,width:this.$JpegResizer5}).getIndex();this.$JpegResizer6(t).unshift({done:p,progress:q});return this;};n.prototype.$JpegResizer6=function(o){"use strict";if(!this.$JpegResizer3.hasOwnProperty(o))this.$JpegResizer3[o]=[];return this.$JpegResizer3[o];};n.prototype.$JpegResizer1=function(o,p){"use strict";o.terminate();var q=this.$JpegResizer6(o.getIndex());this.$JpegResizer7(p);q.forEach(function(r){return r.done(p);});q.length=0;};n.prototype.$JpegResizer2=function(o,p){"use strict";if(p.error)this.$JpegResizer7(p.error);if(p.done){this.$JpegResizer6(o.getIndex()).pop().done(p.error,p.blob,p.skipped);}else{var q=this.$JpegResizer6(o.getIndex()),r=q[q.length-1].progress;if(r)r({written:p.written,total:p.total});}};n.prototype.$JpegResizer7=function(o){"use strict";var p=o.message;if(p.indexOf('Not a JPEG file')!==-1){o.code=l.BAD_JPEG;}else if(p.indexOf('abort()')!==-1){o.code=l.WORKER_ABORT;}else o.code=l.UNKNOWN_RESIZE_ERROR;};n.DEFAULT_POOL_SIZE=3;n.DEFAULT_RESIZE_HEIGHT=2048;n.DEFAULT_RESIZE_WIDTH=2048;n.LOW_QUALITY_RESIZE_HEIGHT=960;n.LOW_QUALITY_RESIZE_WIDTH=960;e.exports=n;},null);
__d("PhotoStoreCore",[],function(a,b,c,d,e,f){var g={actions:{UPDATE:'update'},_photoCache:{},_postCreateCallbacks:{},getPhotoCache:function(h){if(!this._photoCache[h])throw new Error('Photo cache requested for unknown set ID');return this._photoCache[h];},hasBeenCreated:function(h){return !!this._photoCache[h];},clearSetCache:function(h){delete this._photoCache[h];delete this._postCreateCallbacks[h];},getByIndex:function(h,i,j){this.getPhotoCache(h).getItemAtIndex(i,j);},getByIndexImmediate:function(h,i){if(this._photoCache[h])return this._photoCache[h].getItemAtIndexImmediate(i);return (void 0);},getItemsInAvailableRange:function(h){var i=this.getAvailableRange(h),j=[];for(var k=i.offset;k<i.length;k++)j.push(this.getByIndexImmediate(h,k));return j;},getItemsAfterIndex:function(h,i,j,k){var l=this.getCursorByIndexImmediate(h,i);this.fetchForward(h,l,j,k);},getAllByIDImmediate:function(h){var i=Object.keys(this._photoCache);return i.map(function(j){return this.getByIndexImmediate(j,this.getIndexForID(j,h));}.bind(this)).filter(function(j){return !!j;});},getIndexForID:function(h,i){if(this._photoCache[h])return this._photoCache[h].getIndexForID(i);return (void 0);},getEndIndex:function(h){var i=this.getAvailableRange(h);return i.offset+i.length-1;},getCursorByIndexImmediate:function(h,i){var j=this.getByIndexImmediate(h,i);if(j)return this._photoCache[h].getCursorForID(j.id);return (void 0);},hasNextPage:function(h){var i=this.getCursorByIndexImmediate(h,this.getEndIndex(h));return this.getPhotoCache(h).hasNextPage(i);},getAvailableRange:function(h){return this.getPhotoCache(h).getAvailableRange();},hasLooped:function(h){return this.getPhotoCache(h).hasLooped();},fetchForward:function(h,i,j,k){this.getPhotoCache(h).getItemsAfterCursor(i,j,k);},fetchBackward:function(h,i,j,k){this.getPhotoCache(h).getItemsBeforeCursor(i,j,k);},executePostCreate:function(h,i){if(this._photoCache[h]){i&&i();}else this._postCreateCallbacks[h]=i;},runPostCreateCallback:function(h){var i=this._postCreateCallbacks[h];if(i){i();delete this._postCreateCallbacks[h];}},setPreFetchCallback:function(h,i){this.getPhotoCache(h).setPreFetchCallback(i);},updateData:function(h){var i=h.set_id;if(!this._photoCache[i]){this._photoCache[i]=new h.cache_class(h);this.runPostCreateCallback(i);}else if(h.query_metadata.action==g.actions.UPDATE){this._photoCache[i].updateData(h);}else this._photoCache[i].addData(h);},updateFeedbackData:function(h){var i=Object.keys(h);i.forEach(function(j){return g.getAllByIDImmediate(j).forEach(function(k){k.feedback=h[j].feedback;});});},reset:function(){Object.keys(this._photoCache).forEach(function(h){return this.clearSetCache(h);}.bind(this));}};e.exports=g;},null);
__d("WebMessengerEvents",["Arbiter","copyProperties"],function(a,b,c,d,e,f,g,h){var i=h(new g(),{MASTER_DOM_CHANGED:'master-dom-changed',DETAIL_DOM_CHANGED:'detail-dom-changed',FOCUS_COMPOSER:'focus-composer',FOCUS_SEARCH:'focus-search',FOCUS_AND_SELECT_SEARCH:'focus-and-select-search',STICKER_CLICKED:'sticker-clicked',SUBMIT_REPLY:'submit-reply',UPDATE_SELECTION:'update-selection',masterDOMChanged:function(){this.inform(i.MASTER_DOM_CHANGED);},detailDOMChanged:function(){this.inform(i.DETAIL_DOM_CHANGED);},focusComposer:function(){this.inform(i.FOCUS_COMPOSER);},focusSearch:function(){this.inform(i.FOCUS_SEARCH);},focusAndSelectSearch:function(){this.inform(i.FOCUS_AND_SELECT_SEARCH);},updateSelection:function(j){this.inform(i.UPDATE_SELECTION,j);},stickerClicked:function(j,k){this.inform(i.STICKER_CLICKED,{packID:j,stickerID:k});},submitReply:function(){this.inform(i.SUBMIT_REPLY);}});e.exports=i;},null);
__d("WebMessengerSubscriptionsHandler",["SubscriptionsHandler"],function(a,b,c,d,e,f,g){var h=new g('webmessenger');e.exports=h;},null);
__d("isWebMessengerURI",[],function(a,b,c,d,e,f){function g(h){return (/^(\/messages)/).test(h.getPath());}e.exports=g;},null);
__d("WebMessengerWidthControl",["Arbiter","CSS","CSSClassTransition","DOM","DOMDimensions","Event","Style","URI","ViewportBounds","WebMessengerEvents","WebMessengerSubscriptionsHandler","$","cx","csx","isWebMessengerURI","requestAnimationFrame","setTimeoutAcrossTransitions","shield","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=205,aa=981,ba=257,ca=18,da=848,ea=724,fa=.57,ga=56,ha,ia,ja;function ka(pa,qa,ra){this.masterChanged=pa;this.detailChaned=qa;q.addSubscriptions(l.listen(window,'resize',y(x(la,this,this),100)),g.subscribe(['sidebar/initialized','sidebar/show','sidebar/hide','minisidebar/show'],x(la,this,this),g.SUBSCRIBE_NEW));var sa=oa()?ga:0;if(ra)sa=z;this._width=oa()?0:da;ja=true;la(this,sa);}function la(pa,qa){var ra=o.getRight()+o.getLeft();ra=ra||qa||0;var sa=k.getViewportWithoutScrollbarDimensions().width-ra,ta=Math.round(Math.max(0,sa/2-aa/2));sa=aa+ta-ba;sa-=ca;sa=Math.max(ea,Math.min(da,sa));if(!isNaN(sa)&&pa._width!==sa){pa._width=sa;var ua=Math.round(sa/(1+fa)),va=sa-ua;pa.masterChanged(va);pa.detailChaned(ua);if(oa()){var wa=sa+ba;ma(function(){if(ia){document.body.className=ia;ia='';}na(wa+'px');h.removeClass(document.body,"_5uj5");ja&&p.detailDOMChanged();ja=false;},ia);}}}function ma(pa,qa){qa&&h.addClass(document.documentElement,"_5uj6");v(pa);qa&&w(h.removeClass.bind(null,document.documentElement,"_5uj6"),1000);}function na(pa){m.set(j.find(document,"div._uaw"),'width',pa);m.set(r('globalContainer'),'width',pa);}function oa(){if(!ha)ha=h.hasClass(document.body,"_6nw");return ha;}i.registerHandler(function(pa,qa,ra,sa){function ta(ua){return oa()&&u(n(ua));}if(ta(sa)){ia=qa;return true;}else if(ta(ra)){ma(function(){pa.className=qa;na('');},true);return true;}});e.exports=ka;},null);
__d("glyph",["ix"],function(a,b,c,d,e,f){e.exports=b('ix');},null);
__d("PhotoStore",["Arbiter","PhotoStoreCore"],function(a,b,c,d,e,f,g,h){g.subscribe('update-photos',function(i,j){h.updateData(j);});e.exports=h;},null);
__d("PhotoUtils",["Event","URI"],function(a,b,c,d,e,f,g,h){var i={getImagesFromData:function(j){var k=[];for(var l in j)if(l.indexOf('image')===0)k.push(j[l]);return k;},getFBIDFromData:function(j){return j&&j.id;},getOriginalImageFromData:function(j){return j.original||j.download_image;},getDownloadURLFromData:function(j){var k=this.getOriginalImageFromData(j);if(!k)return null;var l=new h(k.uri);l.addQueryData({dl:1});return l;},getPermalinkFromData:function(j){return j.permalink;},canViewerMakeCoverPhoto:function(j){return !!j.can_viewer_make_cover_photo;},getCoverPhotoURLFromData:function(j){return new h('/profile.php').addQueryData({preview_cover:i.getFBIDFromData(j)});},preload:function(j,k,l){var m=j.getDimensions();for(var n=0;n<k.length;++n){var o=m.getBestFitImageFromPhoto(k[n],m.getMaxStageDimensions()),p=new Image();l&&g.listen(p,'load',l.bind(null,k[n]));j.getLogger().log(o.uri);p.src=o.uri;}}};e.exports=i;},null);
__d("PhotoViewState",["ArbiterMixin","PhotoStore","PhotoUtils","SpotlightViewerLoggingEvents","copyProperties","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=l(g);for(var n in m)if(m.hasOwnProperty(n))p[n]=m[n];var o=m===null?null:m.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=m;function p(q,r,s,t,u){"use strict";this._viewer=q;this._setID=r;this._updateCallback=t;this._position=s||0;this._preloaded={};this._reverse=u;}p.prototype._fetchCallback=function(q){"use strict";if(!this._viewer.isOpen())return;this._preload(q);this._log(j.DATA_FETCH_COMPLETE);};p.prototype._preload=function(q){"use strict";i.preload(this._viewer,q,function(r){this._preloaded[i.getFBIDFromData(r)]=true;}.bind(this));};p.prototype._preloadPhotosInRange=function(q,r){"use strict";var s=[];for(var t=q;t<=r;++t){var u=h.getByIndexImmediate(this._setID,t);if(u&&!this._isPreloaded(u))s.push(u);}this._preload(s);};p.prototype._isPreloaded=function(q){"use strict";return this._preloaded[i.getFBIDFromData(q)];};p.prototype.getPosition=function(){"use strict";return this._position;};p.prototype.isValidMovement=function(q){"use strict";if(!h.hasBeenCreated(this._setID))return false;if(h.hasLooped(this._setID))return true;var r=this._position+q,s=h.getAvailableRange(this._setID),t=s.offset+s.length-1;return r>=s.offset-1&&r<=t+1;};p.prototype.getRelativeMovement=function(q){"use strict";return h.getIndexForID(this._setID,q)-this._position;};p.prototype.moveCursor=function(q){"use strict";if(!this.isValidMovement(q))return false;this._position+=q;return true;};p.prototype._page=function(q){"use strict";if(!this.moveCursor(q))return;this._log(j.PAGE_BEGIN);var r=h.getByIndexImmediate(this._setID,this._position);if(!r){this.inform('photo_fetch');this._log(j.PHOTO_FETCH);}else if(!this._isPreloaded(r))this._preload([r]);h.getByIndex(this._setID,this._position,this._updateCallback);this._loadMoreIfNecessary(q>0,p.BUFFER_SIZE);this._log(j.PAGE_COMPLETE);};p.prototype.loadMoreForwardIfNecessary=function(q){"use strict";var r=h.getAvailableRange(this._setID),s=r.offset+r.length-1,t=this._position+q;if(t>s&&!h.hasLooped(this._setID)){var u=h.getCursorByIndexImmediate(this._setID,s);h.fetchForward(this._setID,u,q,this._fetchCallback.bind(this));}else this._preloadPhotosInRange(this._position+1,t);};p.prototype.loadMoreBackwardIfNecessary=function(q){"use strict";var r=h.getAvailableRange(this._setID),s=this._position-q;if(s<r.offset&&!h.hasLooped(this._setID)){var t=h.getCursorByIndexImmediate(this._setID,r.offset);h.fetchBackward(this._setID,t,q,this._fetchCallback.bind(this));}else this._preloadPhotosInRange(s,this._position-1);};p.prototype._loadMoreIfNecessary=function(q,r){"use strict";if(q){this.loadMoreForwardIfNecessary(r);}else this.loadMoreBackwardIfNecessary(r);};p.prototype.displayFirst=function(){"use strict";if(!this._viewer.isOpen())return;h.setPreFetchCallback(this._setID,function(){this._log(j.DATA_FETCH_BEGIN);}.bind(this));var q=function(r){if(!this._isPreloaded(r))this._preload([r]);this._updateCallback(r);}.bind(this);h.getByIndex(this._setID,this._position,q);if(this._reverse){this.loadMoreBackwardIfNecessary(p.BUFFER_SIZE);}else this.loadMoreForwardIfNecessary(p.BUFFER_SIZE);};p.prototype.backward=function(){"use strict";this._page(this._reverse?1:-1);};p.prototype.forward=function(){"use strict";this._page(this._reverse?-1:1);};p.prototype._log=function(q){"use strict";this._viewer.log(q);};k(p,{BUFFER_SIZE:4});e.exports=p;},null);
__d("SpotlightViewerClose",["React","ReactPropTypes","TooltipLink.react","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.createClass({displayName:"SpotlightViewerClose",propTypes:{position:h.oneOf(['left','right'])},getDefaultProps:function(){return {position:'right'};},render:function(){var n=(this.props.position=='left')?"_5wx3":"_5wx4",o=g.createElement("span",null,"Press Esc to close");return (g.createElement(i,{className:l("_4-o9 _50-m _51an",n),onClick:this.props.onClick,tooltip:o}));}});e.exports=m;},null);
__d("SpotlightViewerImage",["React","cx"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:"SpotlightViewerImage",render:function(){return (g.createElement("img",{className:"_4-od",src:this.props.src,style:{width:this.props.dimensions.x,height:this.props.dimensions.y}}));}});e.exports=i;},null);
__d("SpotlightViewerCoreMixin",["PhotoLogger","PhotoStore","PhotoUtils","PhotoViewState","React","SpotlightViewerImage","SpotlightViewerLoggingEvents"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={_displayFirstPhoto:function(){h.executePostCreate(this.props.setid,this.viewState.displayFirst.bind(this.viewState));},_getInitialPosition:function(){var o;if(!this.props.clearcache)o=h.getIndexForID(this.props.setid,this.props.photoid);if(o===(void 0)){h.clearSetCache(this.props.setid);o=0;}return o;},__displayPhoto:function(){var o=this._getInitialPosition();this.viewState=new j(this,this.props.setid,o,this._updatePhoto,this.props.reverse);this.inform('open');this._displayFirstPhoto();},componentWillMount:function(){this._logger=new g(this.getViewerID());this.log(m.OPEN_BEGIN);this.__displayPhoto();},componentDidMount:function(){this._enableSubscriptions&&this._enableSubscriptions();this.log(m.OPEN_COMPLETE);},isOpen:function(){return this.state.open;},close:function(){if(!this.isOpen())return;this.log(m.CLOSE_BEGIN);this.setState({open:false},function(){this.inform('close');this.log(m.CLOSE_COMPLETE);});},componentWillUnmount:function(){this.viewState=null;},_onClickViewport:function(o){o?this.viewState.forward():this.viewState.backward();},_getMedia:function(o,p){return (k.createElement(l,{ref:"image",src:o.uri,dimensions:p.imageDimensions}));},_getCurrentFBID:function(){return i.getFBIDFromData(this.state.photoData);},_updatePhoto:function(o){this.log(m.PHOTO_CHANGE_BEGIN);this.setState({photoData:o},function(){this.inform('photo_change',this.state.photoData);this.log(m.PHOTO_CHANGE_COMPLETE);});},getLogger:function(){return this._logger;},log:function(o){this._logger&&this._logger.logEvent(o);}};e.exports=n;},null);
__d("SpotlightViewerStageResizer",["Event","SubscriptionsHandler","Vector"],function(a,b,c,d,e,f,g,h,i){var j=520;function k(l,m){"use strict";this._subscriptionsHandler=new h();this._subscriptionsHandler.addSubscriptions(g.listen(window,'resize',this._resetStageDimensions.bind(this)));this._dimensions=l;this._minHeight=m.minHeight||j;this._minWidth=m.minWidth||j;this._resetStageDimensions();}k.prototype.destroy=function(){"use strict";this._dimensions=null;this._subscriptionsHandler.release();};k.prototype._resetStageDimensions=function(){"use strict";this._currentStageDimensions=new i(this._minWidth,this._minHeight);};k.prototype.getImageAndStageDimensions=function(l){"use strict";var m=this._dimensions.getBestFitDimensionsFromPhoto(l,this._dimensions.getMaxStageDimensions()),n=this._dimensions.getStageDimensions(m);this._currentStageDimensions=new i(Math.max(n.x,this._minWidth,this._currentStageDimensions.x),Math.max(n.y,this._minHeight,this._currentStageDimensions.y));var o=this._dimensions.getImageDimensionsForStage(m,this._currentStageDimensions);return {stageDimensions:this._currentStageDimensions,imageDimensions:o};};k.prototype.getCurrentStageDimensions=function(){"use strict";return this._currentStageDimensions;};e.exports=k;},null);
__d("PhotoViewerDimensions",["Event","PhotoUtils","Vector","copyProperties"],function(a,b,c,d,e,f,g,h,i,j){var k={verticalPadding:'number',horizontalPadding:'number',normalResDim:'object'};function l(m){"use strict";for(var n in m){if(!k[n])throw new Error("Unsupported extraData value '"+n+"' should not be used");if(typeof m[n]===k[n])this['_'+n]=m[n];}this._listener=g.listen(window,'resize',this._resetMaxStageDimensions.bind(this));}l.prototype.destroy=function(){"use strict";this._listener.remove();};l.prototype.getStageDimensions=function(m){"use strict";var n=this.getMaxStageDimensions(),o=new i(Math.min(m.x,n.x),Math.min(m.y,n.y)),p=o.x/o.y,q=m.x/m.y;if(p<q){o.y=Math.round(o.x/q);}else o.x=Math.round(o.y*q);return o;};l.prototype.getImageDimensionsForStage=function(m,n){"use strict";var o=m.x,p=m.y,q=n.x,r=n.y;if(o>=q||p>=r){var s=o/p,t=q/r;if(t<s){o=q;p=Math.round(q/s);}else if(t>s){o=Math.round(r*s);p=r;}else{o=q;p=r;}}return new i(o,p);};l.prototype.getMaxStageDimensions=function(){"use strict";if(!this._maxStageDimensions)this._maxStageDimensions=new i(i.getViewportDimensions().x-this._horizontalPadding,i.getViewportDimensions().y-this._verticalPadding);return this._maxStageDimensions;};l.prototype._resetMaxStageDimensions=function(){"use strict";this._maxStageDimensions=null;};l.prototype.getBestFitImageFromPhoto=function(m,n){"use strict";var o=null,p=h.getImagesFromData(m);p=p.sort(function(r,s){return s.width-r.width;});if(window.devicePixelRatio&&window.devicePixelRatio>1)n=new i(n.x*window.devicePixelRatio,n.y*window.devicePixelRatio);for(var q=0;q<p.length;q++)if(!o||p[q].width>=n.x||p[q].height>=n.y)o=p[q];return o;};l.prototype.getOriginalDimensionsFromPhoto=function(m){"use strict";var n=h.getOriginalImageFromData(m);return new i(n.width,n.height);};l.prototype.getBestFitDimensionsFromPhoto=function(m,n){"use strict";var o=this.getBestFitImageFromPhoto(m,n);return new i(o.width,o.height);};l.prototype.getVerticalPadding=function(){"use strict";return this._verticalPadding;};l.prototype.getHorizontalPadding=function(){"use strict";return this._horizontalPadding;};j(l.prototype,{_verticalPadding:40,_horizontalPadding:60,_normalResDim:{x:960,y:960}});e.exports=l;},null);
__d("SpotlightViewerDimensionMixin",["SpotlightViewerStageResizer","PhotoViewerDimensions"],function(a,b,c,d,e,f,g,h){var i={getInitialState:function(){this._dimensions=new h({verticalPadding:this.props.verticalPadding,horizontalPadding:this.props.horizontalPadding});this._resizer=new g(this._dimensions,{minHeight:this.props.minHeight,minWidth:this.props.minWidth});return {maxStageDimensions:this._dimensions.getMaxStageDimensions()};},componentWillUnmount:function(){this._resizer&&this._resizer.destroy();this._resizer=null;this._dimensions&&this._dimensions.destroy();this._dimensions=null;},getMedia:function(){if(this.state.photoData){var j=this._resizer.getImageAndStageDimensions(this.state.photoData),k=this._dimensions.getBestFitImageFromPhoto(this.state.photoData,this.state.maxStageDimensions);return this._getMedia(k,j);}else return null;},getDimensions:function(){return this._dimensions;},getStageDimensions:function(){if(this.state.photoData){return this._resizer.getImageAndStageDimensions(this.state.photoData).stageDimensions;}else return this._dimensions.getMaxStageDimensions();},getImageDimensions:function(){if(!this.state.photoData)return null;return this._resizer.getImageAndStageDimensions(this.state.photoData).imageDimensions;},onResize:function(){this.setState({maxStageDimensions:this._dimensions.getMaxStageDimensions()});}};e.exports=i;},null);
__d("SpotlightViewport",["Locale","Parent","React","ReactPropTypes","Vector","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=i.createClass({displayName:"SpotlightViewport",propTypes:{stageDimensions:j.object.isRequired,snapToPhoto:j.bool},PAGE_TO_PREV_PERCENTAGE:.2,sections:{NONE:null,FORWARD:1,BACKWARD:2},getInitialState:function(){return {currentActiveSection:this.sections.NONE,active:true};},_onMouseMove:function(event){var o=k.getEventPosition(event.nativeEvent),p=k.getElementPosition(this.getDOMNode()),q,r=o.x-p.x,s=r/this.props.stageDimensions.x;if(g.isRTL()){q=s>(1-this.PAGE_TO_PREV_PERCENTAGE);}else q=s<this.PAGE_TO_PREV_PERCENTAGE;if(q){this.setState({currentActiveSection:this.sections.BACKWARD});}else this.setState({currentActiveSection:this.sections.FORWARD});},_onClick:function(event){var o=this.state.currentActiveSection==this.sections.FORWARD,p=event.target;if(!h.byClass(p,"_51an"))this.props.onClick&&this.props.onClick(o);},_onMouseEnter:function(){this.setState({active:true});},_onMouseLeave:function(){this.setState({active:false});},render:function(){var o=(("_4-of")+(!this.state.active&&!this.props.active?' '+"_50-l":'')+(this.state.currentActiveSection===this.sections.BACKWARD?' '+"_516a":'')+(this.state.currentActiveSection===this.sections.FORWARD?' '+"_516b":'')+(this.props.showLoadingIndicator?' '+"_51jp":''));if(this.props.className)o=m(o,this.props.className);var p={};if(this.props.stageDimensions){var q=this.props.snapToPhoto?['maxHeight','maxWidth']:['height','width'];p[q[0]]=this.props.stageDimensions.y;p[q[1]]=this.props.stageDimensions.x;}return (i.createElement("div",{className:o,style:p,onClick:this._onClick,onMouseMove:this._onMouseMove,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},this.props.children,i.createElement("div",{className:"_4-og"},i.createElement("span",{className:"_4-oh"}),this.props.media,i.createElement("div",{className:"_4-oi"}))));}});e.exports=n;},null);
__d("StickerState",["ImmutableObject","StickerConfig","PresenceState","StickerConstants","StickerImages","StickersDispatcher","StickerServerRequests","mixInEventEmitter"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o={},p,q,r,s=null,t=0,u={},v=[],w=[],x=[],y=null,z=i.get();if(z)y=z.tray_pack_id;var aa=h.ShowStickerReplyNUX,ba=h.ShowStickerSearchNUX,ca={onTrayDataReady:function(fa){if(!q)q=m.fetchTrayData(function(ga){v=ga.packs.map(function(ha){return da(ha);});r=ga.mru;t=ga.num_new_packs;x=ga.tags;});q.then(fa);},onStoreDataReady:function(fa){if(!p)p=m.fetchStoreData(function(ga){w=ga.packs.map(function(ha){return da(ha);});});p.then(fa);},onPackDataReady:function(fa,ga){if(!o[fa])o[fa]=m.fetchPackData(fa,function(ha){da(ha);});o[fa].then(ga);},getPacksInTray:function(){var fa=[],ga;for(var ha=0;ha<v.length;ha++)if(v[ha].id==j.EMOTICON_PACK_ID){ga=v[ha];}else if(v[ha].isMessengerCapable)fa.push(v[ha]);ga&&fa.push(ga);return fa;},getPacksInCommentsTray:function(){var fa=[],ga=[],ha;for(var ia=0;ia<v.length;ia++)if(v[ia].id==j.EMOTICON_PACK_ID){ha=v[ia];}else if(v[ia].isCommentsCapable){fa.push(v[ia]);}else ga.push(v[ia]);var ja=fa.concat(ga);if(ha)ja.push(ha);return ja;},getPacksInComposerTray:function(){var fa=[],ga;for(var ha=0;ha<v.length;ha++)if(v[ha].id==j.EMOTICON_PACK_ID){ga=v[ha];}else if(v[ha].isComposerCapable)fa.push(v[ha]);ga&&fa.push(ga);return fa;},getPackIDsInTray:function(){return v.map(function(fa){return fa.id;});},getPacksInStore:function(){return w.filter(function(fa){return fa.isMessengerCapable;});},getComposerPacksInStore:function(){return w.filter(function(fa){return fa.isComposerCapable;});},getPack:function(fa){return u[fa];},getNumNewPacks:function(){return t;},getFeaturedTags:function(){return x;},resetNumNewPacks:function(){if(t){t=0;this.emit(this.NUM_NEW_PACKS_CHANGED,0);}},addMRUPack:function(){if(r){this._addPackToTray(r);r=null;}},addPack:function(fa){var ga=false;if(u[fa])ga=u[fa].isPromoted;m.addPack(fa,ga,function(ha){this._addPackToTray(ha);}.bind(this));},removePack:function(fa){m.removePack(fa,function(ga){v=v.filter(function(ha){return ha.id!==ga;});u[ga]=g.set(u[ga],{isInTray:false});w=w.map(function(ha){return u[ha.id];});this.emit(this.PACKS_CHANGED,ga);}.bind(this));},setTrayPackID:function(fa){y=fa;i.doSync();this.emit(ca.PACK_SELECTED,fa);},getTrayPackID:function(){return y;},shouldShowStickerReplyNUX:function(){return aa;},clearShowStickerReplyNUX:function(){aa=false;},shouldShowStickerSearchNUX:function(){return ba;},clearShowStickerSearchNUX:function(){m.markSeenSearchNUX();ba=false;},_addPackToTray:function(fa,ga){da(fa);u[fa.id]=g.set(u[fa.id],{isPurchased:!ga,isInTray:true});var ha=v.filter(function(ja){return ja.id===fa.id;}).length>0;if(!ha){var ia;if(!ga){ia=v.filter(function(ja){return ja.isMRU||ja.isSearch;}).length;}else ia=v.filter(function(ja){return ja.id!==j.EMOTICON_PACK_ID;}).length;v.splice(ia,0,u[fa.id]);}w=w.map(function(ja){return u[ja.id];});this.emit(this.PACKS_CHANGED,fa.id);},_addRecentlyUsedSticker:function(fa){for(var ga=0;ga<s.length;++ga)if(s[ga].id===fa.id){s.splice(ga,1);break;}s.unshift(fa);},getMRUStickerPack:function(fa){if(!s)s=fa;return s;},updateRecentlyUsed:function(fa){if(!s){this.addMRUPack();return;}this._addRecentlyUsedSticker(k.getSticker(fa));},promotePackSentFromSearch:function(fa){m.promotePackSentFromSearch(fa,function(ga){return ga&&this._addPackToTray(ga,true);}.bind(this));}};l.register(function(fa){if(fa.actions&&fa.actions.length){var ga=j.ActionTypes;fa.actions.forEach(function(ha){switch(ha.actionType){case ga.ADD_PACK:ca.addPack(ha.packID);break;case ga.REMOVE_PACK:ca.removePack(ha.packID);break;case ga.SELECT_PACK:ca.setTrayPackID(ha.packID);break;case ga.RESET_NUM_NEW_PACKS:ca.resetNumNewPacks();break;}});}});ca.PACKS_CHANGED='StickerState/packsChanged';ca.PACK_SELECTED='StickerState/packSelected';ca.NUM_NEW_PACKS_CHANGED='StickerState/numNewPacksChanged';i.registerStateStorer(function(fa){fa.tray_pack_id=y;});function da(fa){var ga=fa.id;if(!u[ga]){return (u[ga]=new g(fa));}else return (u[ga]=g.set(u[ga],fa));}var ea={};ea[ca.PACK_SELECTED]=true;ea[ca.PACKS_CHANGED]=true;ea[ca.NUM_NEW_PACKS_CHANGED]=true;n(ca,ea);e.exports=ca;},null);
__d("ProgressBarBase",["emptyFunction","requestAnimationFrame","removeFromArray","arrayContains"],function(a,b,c,d,e,f,g,h,i,j){var k=[];function l(m,n){"use strict";this._min=m||0;this._max=n||100;this._initialPosition=0;this._position=0;this._initialVelocity=0;this._velocity=0;this._acceleration=0;this.useAcceleration=true;this._targetPosition=0;this._targetTime=0;this._startTime=null;this._onComplete=g;}l.prototype.setPosition=function(m){"use strict";m=this._normalizePosition(m);this._initialPosition=m;this._position=m;this.updateMeter(this._position);this.stop();return this;};l.prototype.setCompleteHandler=function(m){"use strict";this._onComplete=m||g;return this;};l.prototype.setTarget=function(m,n){"use strict";this._stopAnimating();this._clearOnCompleteTimeout();this._targetPosition=m;var o=this._normalizePosition(m);this._targetTime=n;this._initialVelocity=this._velocity;this._initialPosition=this._position;if(this.useAcceleration){this._acceleration=2*(o-this._initialPosition-this._initialVelocity*n)/(n*n);}else{this._acceleration=0;this._velocity=this._initialVelocity=(o-this._initialPosition)/n;}if(this._position>=o){this._onComplete();}else this._start();return this;};l.prototype.setNoAcceleration=function(m){"use strict";this.useAcceleration=!m;return this;};l.prototype._clearOnCompleteTimeout=function(){"use strict";a.clearTimeout(this._onCompleteTimeout);};l.prototype.stop=function(){"use strict";this._clearOnCompleteTimeout();this._velocity=0;this._initialVelocity=0;this._acceleration=0;this._stopAnimating();return this;};l.prototype._start=function(){"use strict";this._startTime=Date.now();this._onCompleteTimeout=a.setTimeout(function(){this.setPosition(this._targetPosition);this._onComplete();}.bind(this),this._targetTime);this._startAnimating();return this;};l.prototype._loop=function(){"use strict";var m=Date.now()-this._startTime;this._position=(.5*this._acceleration*m*m)+(this._initialVelocity*m)+this._initialPosition;var n=this._velocity;this._velocity=this._acceleration*m+this._initialVelocity;var o=n<0!==this._velocity<0;if(this._position>this._normalizePosition(this._targetPosition)||o){this.setPosition(this._targetPosition);this._onComplete();}else this.updateMeter(this._position);};l.prototype.updateMeter=function(m){"use strict";throw "Unimplemented function: updateMeter";};l.prototype._normalizePosition=function(m){"use strict";return Math.min(Math.max((m-this._min)/(this._max-this._min),0),1);};l.prototype._startAnimating=function(){"use strict";if(!j(k,this)){k.push(this);if(k.length===1)h(l.prototype._requestAnimationFrameCallback);}};l.prototype._stopAnimating=function(){"use strict";i(k,this);};l.prototype._requestAnimationFrameCallback=function(){"use strict";k.forEach(function(m){m._loop();});if(k.length)h(l.prototype._requestAnimationFrameCallback);};l.setPosition=function(m,n){"use strict";m.setPosition(n);};l.setTarget=function(m,n,o){"use strict";m.setTarget(n,o);};e.exports=l;},null);
__d("ProgressBar",["ProgressBarBase","CSS","Style","cx","csx","DOM"],function(a,b,c,d,e,f,g,h,i,j,k,l){for(var m in g)if(g.hasOwnProperty(m))o[m]=g[m];var n=g===null?null:g.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=g;function o(p,q,r){"use strict";g.call(this,q,r);this._root=p;this._meter=l.find(p,"div._5e4k");this._meter2=l.scry(p,"div._5e2g")[0];}o.prototype.getRoot=function(){"use strict";return this._root;};o.prototype.updateMeter=function(p){"use strict";var q=Math.min(Math.max(p,0),1);h.conditionClass(this._meter,"_5e2d",q<=0);h.conditionClass(this._meter,"_5e4j",q>=1);q=q*100+'%';i.set(this._meter,'width',q);if(this._meter2){i.set(this._meter2,'left',q);i.set(this._meter2,'width',q);}};o.prototype.changeLabel=function(p){"use strict";var q=l.scry(this._root,"span._5e2h");q.forEach(function(r){l.setContent(r,p);});return this;};e.exports=o;},null);